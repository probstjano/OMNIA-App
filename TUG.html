<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Timed Up and Go (TUG) Test</title>

  <!-- Zentrale Dateien -->
  <link rel="stylesheet" href="app-style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>

<body class="assessment-page">

<h1>Timed Up and Go (TUG)</h1>
<p>Test zur EinschÃ¤tzung der MobilitÃ¤t und des Sturzrisikos.</p>
<p>Im Cenplex-Plan als <strong>Messung</strong> vorhanden. Hier Werte eintragen fÃ¼r Interpretation und Normwerte. Score im Cenplex Ã¼bertragen.</p>
<p><strong>Achtung:</strong> Normwerte und einige Cut-off-Werte basieren nur auf kleinen Stichproben und sind vorsichtig zu interpretieren.</p>

<form>
  <!-- Originaler Inhaltsbereich unverÃ¤ndert -->
  <label>Gemessene Zeit (Sekunden):</label>
  <input type="number" id="tugzeit" min="0" step="0.01">

  <label>Alter:</label>
  <input type="number" id="age" min="60" max="90" step="1">

  <label>Geschlecht:</label>
  <select id="sex">
    <option value="male">MÃ¤nnlich</option>
    <option value="female">Weiblich</option>
  </select>

  <button type="button" class="primary" onclick="calculateTUG()">ğŸ“Š Normwerte & Cut-Offs anzeigen</button>
  <button type="button" class="secondary" onclick="downloadPDF()">ğŸ“„ Als PDF speichern</button>
</form>

<div id="result"></div>
<div id="normwerteTUG" class="hidden"></div>

<!-- CONTENT-LOCK START: Original JS, Normwerte, PDF-Logik -->
<script>
    const tugNorms = {
      male: {
        60: { mean: 8, sd: 2 },
        70: { mean: 9, sd: 3 },
        80: { mean: 10, sd: 1 }
      },
      female: {
        60: { mean: 8, sd: 2 },
        70: { mean: 9, sd: 2 },
        80: { mean: 11, sd: 3 }
      }
    };

    function nearestAge(age) {
      if (age <= 69) return 60;
      else if (age <= 79) return 70;
      else return 80;
    }

    function calculateTUG() {
      const age = parseInt(document.getElementById("age").value);
      const sex = document.getElementById("sex").value;
      const zeit = parseFloat(document.getElementById("tugzeit").value);

      if (isNaN(age) || isNaN(zeit)) {
        alert("Bitte Alter und Zeit korrekt eingeben.");
        return;
      }

      const nearest = nearestAge(age);
      const norm = tugNorms[sex][nearest];
      const mean = norm.mean;
      const sd = norm.sd;

      let resultText = `Ihre TUG-Zeit: ${zeit.toFixed(2)} Sekunden\nVergleichswert (${nearest} Jahre, ${sex === 'male' ? 'MÃ¤nner' : 'Frauen'}): Mittelwert ${mean}s Â± ${sd}s\n`;

      if (zeit <= mean + sd && zeit >= mean - sd) {
        resultText += "\nâ¡ï¸ Innerhalb einer Standardabweichung";
      } else if (zeit > mean + sd) {
        resultText += "\nâ¬†ï¸ Mehr als 1 Standardabweichung langsamer als der Mittelwert";
      } else {
        resultText += "\nâ¬‡ï¸ Mehr als 1 Standardabweichung schneller als der Mittelwert";
      }

      if (zeit > 11.5) {
        resultText += "\n\nâš ï¸ Sturzrisiko: Parkinson-Patienten (>11,5 Sekunden)";
      }
      if (zeit > 14) {
        resultText += "\nâš ï¸ Sturzrisiko: Ã¤ltere Schlaganfallpatienten (>14 Sekunden)";
      }
      if (zeit > 15) {
        resultText += "\nâš ï¸ Sturzrisiko: Intermediate Risk Group World Guidelines Fall Prevention (>15 Sekunden)";
      }

      document.getElementById("result").innerText = resultText;

      const norms = document.getElementById("normwerteTUG");
      norms.innerHTML = `<h3>Weitere Cut-Offs und Normwerte</h3>
        <table>
          <tr><th>Alter</th><th>Geschlecht</th><th>Mittelwert</th><th>Standardabweichung</th></tr>
          <tr><td>60-69</td><td>MÃ¤nnlich</td><td>8</td><td>2</td></tr>
          <tr><td>60-69</td><td>Weiblich</td><td>8</td><td>2</td></tr>
          <tr><td>70-79</td><td>MÃ¤nnlich</td><td>9</td><td>3</td></tr>
          <tr><td>70-79</td><td>Weiblich</td><td>9</td><td>2</td></tr>
          <tr><td>80-89</td><td>MÃ¤nnlich</td><td>10</td><td>1</td></tr>
          <tr><td>80-89</td><td>Weiblich</td><td>11</td><td>3</td></tr>
        </table>
        <h4>Weitere Sturzrisiko-Grenzwerte:</h4>
        <ul>
          <li>World Guidelines Fall Prevention: Intermediate Risk Group > 15 Sekunden</li>
          <li>Parkinson-Patienten > 11,5 Sekunden</li>
          <li>Ã„ltere Schlaganfallpatienten > 14 Sekunden</li>
        </ul>`;
      norms.classList.remove("hidden");
    }
</script>
<!-- CONTENT-LOCK END -->

<!-- Einheitlicher Footer -->
<div class="footer-nav">
  <button class="secondary" onclick="goBack()">â¬…ï¸ ZurÃ¼ck</button>
  <button class="primary" onclick="goHome()">ğŸ  Hauptseite</button>
</div>

<!-- Zentrales Verhalten -->
<script src="app-core.js"></script>

</body>
</html>
