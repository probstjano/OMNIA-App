<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dynamic Gait Index (DGI)</title>

  <!-- Zentrale Dateien -->
  <link rel="stylesheet" href="app-style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="robotoBase64.js"></script>
</head>

<body class="assessment-page">
  <h1>Dynamic Gait Index (DGI)</h1>
  <p>Die DGI bewertet die FÃ¤higkeit einer Person, das Gleichgewicht beim Gehen unter Ã¤usseren Anforderungen anzupassen (VestibulÃ¤re StÃ¶rungen, MS, CVI)</p>
  <p>Im Cenplex Behandlungsplan als <strong>Messung</strong> vorhanden. Hier durchfÃ¼hren/eintragen und Score Ã¼bertragen</p>

  <!-- Originaler Form-/Inhaltsbereich -->
  <form id="dgiForm">

    <div class="question-block">
      <div class="question">1. Gehen auf ebener Gehstrecke (6.1 m)</div>
      <span class="toggle" onclick="toggleInstruction(this)">ğŸ“˜ Instruktion anzeigen</span>
      <div class="instruction">Gehen Sie in Ihrem normalen Tempo bis zur markierten Stelle.</div>
      <select name="q0">
        <option value="">-- Bewertung auswÃ¤hlen --</option>
        <option value="3">0) starke EinschrÃ¤nkung â€“ Kann nicht 6.1 m ohne Hilfsperson gehen, starke Gangabweichungen oder Gleichgewichtsprobleme.</option>
        <option value="2">1) mittlere EinschrÃ¤nkung â€“ 6.1 m Gehen, langsames Gehtempo, Hinkmechanismen, Gleichgewichtsprobleme.</option>
        <option value="1">2) leichte EinschrÃ¤nkung â€“ 6.1 m Gehen mit Gehhilfsmittel, Tempo verlangsamt, leichte Deviation.</option>
        <option value="0">3) normal â€“ 6.1 m Gehen, ohne Gehhilfsmittel, normales Tempo, keine GleichgewichtsstÃ¶rungen, normales Gangbild, kein Hinken.</option>
      </select>
    </div>

    <div class="question-block">
      <div class="question">2. Gehen mit Tempowechsel</div>
      <span class="toggle" onclick="toggleInstruction(this)">ğŸ“˜ Instruktion anzeigen</span>
      <div class="instruction">Beginnen Sie in Ihrem normalen Gehtempo (1.5 m), beschleunigen Sie â€¦</div>
      <select name="q1">
        <option value="">-- Bewertung auswÃ¤hlen --</option>
        <option value="3">0) starke EinschrÃ¤nkung â€“ Kein Tempo-Wechsel mÃ¶glich â€¦</option>
        <option value="2">1) mittlere EinschrÃ¤nkung â€“ Nur kleine TempoverÃ¤nderungen â€¦</option>
        <option value="1">2) leichte EinschrÃ¤nkung â€“ Tempowechsel mÃ¶glich, aber â€¦</option>
        <option value="0">3) normal â€“ Fliessender Tempowechsel ohne â€¦</option>
      </select>
    </div>

    <div class="question-block">
      <div class="question">3. Gehen mit Kopfdrehung nach rechts und links</div>
      <span class="toggle" onclick="toggleInstruction(this)">ğŸ“˜ Instruktion anzeigen</span>
      <div class="instruction">Gehen Sie in Ihrem normalen Tempo. Wenn ich sage â€nach rechtsâ€œâ€¦</div>
      <select name="q2">
        <option value="">-- Bewertung auswÃ¤hlen --</option>
        <option value="3">0) starke EinschrÃ¤nkung â€“ Muss stehen bleiben â€¦</option>
        <option value="2">1) mittlere EinschrÃ¤nkung â€“ Mittlere Verlangsamung â€¦</option>
        <option value="1">2) leichte EinschrÃ¤nkung â€“ Leichte VerÃ¤nderung â€¦</option>
        <option value="0">3) normal â€“ Kopfdrehung flÃ¼ssig â€¦</option>
      </select>
    </div>

    <div class="question-block">
      <div class="question">4. Gehen und nach oben und unten schauen</div>
      <span class="toggle" onclick="toggleInstruction(this)">ğŸ“˜ Instruktion anzeigen</span>
      <div class="instruction">Gehen Sie in normalem Tempo. Bei â€nach obenâ€œâ€¦</div>
      <select name="q3">
        <option value="">-- Bewertung auswÃ¤hlen --</option>
        <option value="3">0) starke EinschrÃ¤nkung â€“ Muss stehen bleiben â€¦</option>
        <option value="2">1) mittlere EinschrÃ¤nkung â€“ MÃ¤ssige TempoverÃ¤nderung â€¦</option>
        <option value="1">2) leichte EinschrÃ¤nkung â€“ Leichte TempoverÃ¤nderung â€¦</option>
        <option value="0">3) normal â€“ Kopfbewegungen flÃ¼ssig â€¦</option>
      </select>
    </div>

    <div class="question-block">
      <div class="question">5. Gehen und Drehung um 180Â°</div>
      <span class="toggle" onclick="toggleInstruction(this)">ğŸ“˜ Instruktion anzeigen</span>
      <div class="instruction">Gehen Sie normal. Bei â€Stopp und drehenâ€œâ€¦</div>
      <select name="q4">
        <option value="">-- Bewertung auswÃ¤hlen --</option>
        <option value="3">0) starke EinschrÃ¤nkung â€“ Drehen nicht selbstÃ¤ndig â€¦</option>
        <option value="2">1) mittlere EinschrÃ¤nkung â€“ Langsam, mit Hilfe â€¦</option>
        <option value="1">2) leichte EinschrÃ¤nkung â€“ Sicher, aber langsamer â€¦</option>
        <option value="0">3) normal â€“ Sicheres Drehen â€¦</option>
      </select>
    </div>

    <div class="question-block">
      <div class="question">6. Gehen Ã¼ber Hindernisse</div>
      <span class="toggle" onclick="toggleInstruction(this)">ğŸ“˜ Instruktion anzeigen</span>
      <div class="instruction">Gehen Sie normal. Wenn Sie zur Schuhschachtel â€¦</div>
      <select name="q5">
        <option value="">-- Bewertung auswÃ¤hlen --</option>
        <option value="3">0) starke EinschrÃ¤nkung â€“ Kann Aufgabe nicht â€¦</option>
        <option value="2">1) mittlere EinschrÃ¤nkung â€“ Muss anhalten â€¦</option>
        <option value="1">2) leichte EinschrÃ¤nkung â€“ Bremst etwas â€¦</option>
        <option value="0">3) normal â€“ Steigt ohne Tempoverlust â€¦</option>
      </select>
    </div>

    <div class="question-block">
      <div class="question">7. Gehen um Hindernisse</div>
      <span class="toggle" onclick="toggleInstruction(this)">ğŸ“˜ Instruktion anzeigen</span>
      <div class="instruction">Gehen Sie geradeaus. Umgehen Sie die erste â€¦</div>
      <select name="q6">
        <option value="">-- Bewertung auswÃ¤hlen --</option>
        <option value="3">0) starke EinschrÃ¤nkung â€“ Wirft Hindernis â€¦</option>
        <option value="2">1) mittlere EinschrÃ¤nkung â€“ Muss stark abbremsen â€¦</option>
        <option value="1">2) leichte EinschrÃ¤nkung â€“ Bremst â€¦</option>
        <option value="0">3) normal â€“ Umrundet flÃ¼ssig â€¦</option>
      </select>
    </div>

    <div class="question-block">
      <div class="question">8. Treppe</div>
      <span class="toggle" onclick="toggleInstruction(this)">ğŸ“˜ Instruktion anzeigen</span>
      <div class="instruction">Steigen Sie die Treppe hoch wie zuhause â€¦</div>
      <select name="q7">
        <option value="">-- Bewertung auswÃ¤hlen --</option>
        <option value="3">0) starke EinschrÃ¤nkung â€“ Kann Aufgabe nicht â€¦</option>
        <option value="2">1) mittlere EinschrÃ¤nkung â€“ Nicht alternierend â€¦</option>
        <option value="1">2) leichte EinschrÃ¤nkung â€“ Alternierend â€¦</option>
        <option value="0">3) normal â€“ Alternierend â€¦</option>
      </select>
    </div>

    <button type="button" onclick="calculateScore()">âœ… Score berechnen</button>
    <button type="button" onclick="generatePDF()">ğŸ“„ PDF exportieren</button>
  </form>

  <div id="result"></div>

  <!-- CONTENT-LOCK START -->
  <script>
    function toggleInstruction(el) {
      const box = el.nextElementSibling;
      box.style.display = box.style.display === "block" ? "none" : "block";
      el.innerText = box.style.display === "block"
        ? "âŒ Instruktion verbergen"
        : "ğŸ“˜ Instruktion anzeigen";
    }

    function calculateScore() {
      let total = 0;
      for (let i = 0; i < 8; i++) {
        const val = document.querySelector(`select[name="q${i}"]`).value;
        if (val === "") return alert("Bitte alle Fragen beantworten.");
        total += parseInt(val);
      }
      document.getElementById("result").innerText = `Gesamtscore: ${total} / 24`;
    }

    async function generatePDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.setFont("helvetica", "normal");
      doc.setFontSize(16);
      doc.text("Dynamic Gait Index (DGI) â€“ Auswertung", 10, 15);
      doc.setFontSize(12);

      let y = 25;
      let total = 0;

      for (let i = 0; i < 8; i++) {
        const block = document.querySelectorAll(".question-block")[i];
        const question = block.querySelector(".question").innerText;
        const sel = document.querySelector(`select[name="q${i}"]`);
        const score = sel.value;
        total += parseInt(score);
        doc.text(`${question}`, 10, y);
        doc.text(`Punkte: ${score}`, 150, y);
        y += 8;
        if (y > 270) { doc.addPage(); y = 20; }
      }

      doc.setFontSize(14);
      y += 10;
      doc.text(`Gesamtscore: ${total} / 24`, 10, y);
      doc.save("DGI_Auswertung.pdf");
    }
  </script>
  <!-- CONTENT-LOCK END -->

  <!-- Einheitlicher Footer -->
  <div class="footer-nav">
    <button class="secondary" onclick="goBack()">â¬…ï¸ ZurÃ¼ck</button>
    <button class="primary" onclick="goHome()">ğŸ  Hauptseite</button>
  </div>

  <!-- Zentrales Verhalten -->
  <script src="app-core.js"></script>
</body>
</html>
